# Base configuration for Nzambe RAG server
# This configuration is shared across all environments
llm:
  query_model:
    name: "gemma3:1b-it-qat"
    platform: "ollama"
    context_window: 8000
    request_timeout: 360.0

index:
  # chunk_size is computed from the embedding model max_length - 10
  chunk_overlap: 120
  paragraph_separator: "\n\n"
  insert_batch_size: 2048

query_engine:
  similarity_top_k: 2
  response_mode: "compact"
  similarity_cutoff: null  # Use null to disable similarity postprocessing

  qa_prompt: |
    Context information is below.
    ---------------------
    {{context_str}}
    ---------------------
    Task: Answer the query using ONLY the provided context which is a part of the Bible.
    Step 1: List the specific verse references from the context that are relevant to this query.
    Step 2: Provide a cohesive answer that incorporates and explicitly state these verses, ensuring every claim is linked to a specific reference.
    Example Answer Style:
    According to Romans 8:28, all things work together for good. This is supported by Proverbs 3:5 which encourages trusting in the Lord.
    Query: {{query_str}}
    Answer:

  refine_prompt: |
    The original query is as follows: {{query_str}}
    We have provided an existing answer: {{existing_answer}}
    We have the opportunity to refine the existing answer (only if needed) with some more context below.
    ------------
    {{context_msg}}
    ------------
    Given the new context, refine the original answer to better answer the query.

    REFINEMENT PROCESS:
    Step 1: Update the list of relevant verse references to include any new pertinent verses found in the additional context.
    Step 2: Produce a refined cohesive answer. If the new context adds specific details or nuances, incorporate them with their respective verse names.
    If the new context is not useful or provides no new verses, return the original answer exactly as it is.

    Example Answer Style:
    According to Romans 8:28, all things work together for good. This is supported by Proverbs 3:5 which encourages trusting in the Lord.

    Refined Answer:

data:
  folder_path: "/app/data/bible"
  books_subfolder: "books"

eval:
  qa_generate_prompt: |
    {{default_qa_generate_prompt}} Make sure the question(s) don't give a clue about the context as the student will have to find the right context in the whole book before answering the question(s). Return only the question(s), one after the other.For eg.: question_text_1
     question_text_2
     ... If only 1 question is required, return only question_text_1
